
# 2.5 - 为什么函数是有用的，以及如何有效使用它们

现在我们已经讲过了函数以及一些关于它的基础能力，让我们来更近一步观察为什么它们是有用的。

## 为什么要使用函数？

新手程序员总是会问，“为什么我们不能直接将代码放到main函数内就好了？” 对于简单的程序来说，你当然可以这么做。但是函数提供了一大堆在长度和复杂性方面无足轻重的但让它们极度有用的优势。

* 结构 -- 程序会变得越来越复杂，把所有但代码放在main()函数内部会增加复杂性。一个函数几乎就像一个极小的我们可从main程序划分出来的程序，当我们编写它的时候不用考虑剩下的程序。这让我们可通过缩减到更加可管理的代码片段来减少程序复杂性。

* 重用 -- 一旦一个函数被编写，它可以在程序中可被调用多次。这避免了重复代码的产生(“不要做重复工作”(“Don't Repeat Yourself”))以及最小化复制/粘贴导致的错误的可能。函数也能够被用于其它的程序，减少代码总量可让程序每次都很容易编写（以及重复测试）。

* 测试 -- 因为函数减少了代码冗余，第一点提到不仅有更少的代码去测试。还因为函数是独立的，一旦我们以及测试过一个函数保证了它可以正常运转，我们就不需要再次测试它除非我们改变了它。这减少了我们一次必须测试的代码量，让它更容易被发现问题（或者在最开始就避免它们）。

* 扩展性 -- 当我们需要扩展我们的程序来解决之前没有解决的一些问题时，函数使得我们改变它一处地方就能影响到任何时候的调用。

* 抽象 -- 为了使用函数，你只需要知道它的名字，输入，输出以及它适用的地方。你不需要知道它是如何工作的，或者它所依赖代码的使用。这一点降低了我们使用别人的代码的认知要求一这（包括标准库中的任何函数）。

尽管你每次使用操作符<<或者>>做输入输出工作的时候，看起来都不像是在使用标准库提供的函数，但它确实满足以上的标准要求。

## 有效的使用函数

新手程序员遇到的其中一个最大的挑战（除了学习语言之外）是理解何时以及如何有效使用函数。这里有一些关于编写函数的基础指导意见：

* 在程序中出现多次的语句应该被制作成函数。举个例子，如果我们正在用相同的方式从用户多次获取输入，那是一个很好的使用函数来代替的例子。如果我们多次用同样的方式输出一些东西，那也是一个很好的使用函数来代替的例子。

* 代码已经明确定义了输入和输出集合是一个很好的使用函数替代的例子，特别是如果它本身很复杂。举个例子，如果我们有一个物品列表，我们想对其进行排序，排序代码会是一个很好的函数，甚至它只需要被使用一次。输入是未排序的列表，输出是已经排序过后的列表。

* 一个函数应该只做一件任务（有且仅有）。

* 当一个函数变得太长或者太复杂，或者很难去理解，它就应该被划分成多个子函数。这个过程叫做重构。我们会在之后的课程3.10 -- 在问题爆发前发现它 更多的讨论重构。

典型的，当学习C++，你会编写许多包含以下三个任务的程序：

1. 从用户获取输入
2. 从输入计算得出一个值
3. 打印计算的值

对于不重要的程序（比如少于20行的代码），虽然其中一些或者全部部分都可以在main函数中完成。但是为了更长久的使用程序（或者仅当练习）把这些部分都分离成一个个独立的函数来替代会是个很好的做法。

新手程序员经常将计算值和打印计算的值放到一个单独的函数。但是这违背了“一个任务”的函数第一准则。一个函数计算一个值应该返回给调用者，然后让调用者来决定如何使用者计算值（比如调用另外一个函数去打印它）。


